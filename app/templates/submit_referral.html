<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Referral einreichen - {{ job.title }}</title>
  <style>
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;background:#f8fafc}
    .container{max-width:800px;margin:2rem auto;padding:0 1rem}
    .card{background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:1.5rem;margin-bottom:1rem}
    .job-info{background:#f8f9fa;border-radius:8px;padding:1rem;margin-bottom:1.5rem}
    .job-title{font-weight:600;margin:0 0 .25rem}
    .job-location{color:#666;font-size:.9rem}
    .form-group{margin-bottom:1.5rem}
    .form-label{display:block;margin-bottom:.5rem;font-weight:500;color:#333}
    .form-input,.form-textarea{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;transition:border-color .2s}
    .form-input:focus,.form-textarea:focus{outline:none;border-color:#667eea}
    .form-textarea{resize:vertical;min-height:100px}
    .form-file{display:block;width:100%;padding:.75rem;border:1px solid #ddd;border-radius:8px;background:#fff}
    .btn{display:inline-block;padding:.7rem 1.2rem;border-radius:8px;text-decoration:none;font-weight:500;border:none;cursor:pointer;transition:all .2s;font-size:1rem}
    .btn-primary{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}
    .btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(102,126,234,.4)}
    .btn-secondary{background:#6c757d;color:#fff;margin-right:1rem}
    .btn-secondary:hover{background:#5a6268}
    .alert{padding:1rem;border-radius:8px;margin-bottom:1rem}
    .alert-danger{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}
    .alert-success{background:#d4edda;color:#155724;border:1px solid #c3e6cb}
    .required{color:#dc3545}
    .help-text{font-size:.85rem;color:#666;margin-top:.25rem}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Referral einreichen</h1>
      
      <div class="job-info">
        <div class="job-title">{{ job.title }}</div>
        <div class="job-location">{{ job.location }}</div>
      </div>
      
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ 'danger' if category == 'error' else category }}">
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      
      <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        
        <div class="form-group">
          <label class="form-label">
            Name des Bewerbers <span class="required">*</span>
          </label>
          <input type="text" name="applicant_name" class="form-input" required 
                 value="{{ form_data.applicant_name if form_data else '' }}"
                 placeholder="Vor- und Nachname">
          <div class="help-text">Vollständiger Name des Bewerbers</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">
            E-Mail des Bewerbers <span class="required">*</span>
          </label>
          <input type="email" name="applicant_email" class="form-input" required
                 value="{{ form_data.applicant_email if form_data else '' }}"
                 placeholder="bewerber@example.com">
          <div class="help-text">Gültige E-Mail-Adresse des Bewerbers</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">
            Telefonnummer des Bewerbers
          </label>
          <input type="tel" name="applicant_phone" class="form-input"
                 value="{{ form_data.applicant_phone if form_data else '' }}"
                 placeholder="+49 123 456789">
          <div class="help-text">Optional - für direkten Kontakt</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">
            Lebenslauf hochladen <span class="required">*</span>
          </label>
          <input type="file" name="resume" class="form-file" required accept=".pdf,.doc,.docx">
          <div class="help-text">PDF, DOC oder DOCX (max. 5MB)</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">
            Anschreiben (optional)
          </label>
          <textarea name="cover_letter" class="form-textarea" 
                    placeholder="Kurzes Anschreiben oder zusätzliche Informationen...">{{ form_data.cover_letter if form_data else '' }}</textarea>
          <div class="help-text">Optionale zusätzliche Informationen über den Bewerber</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">
            Ihre Empfehlung
          </label>
          <textarea name="notes" class="form-textarea" 
                    placeholder="Warum empfehlen Sie diesen Bewerber? Welche Stärken hat er/sie?">{{ form_data.notes if form_data else '' }}</textarea>
          <div class="help-text">Ihre persönliche Einschätzung und Empfehlung</div>
        </div>
        
        <div class="form-group">
          <a href="{{ url_for('main.job_detail', job_id=job.job_id) }}" class="btn btn-secondary">
            Abbrechen
          </a>
          <button type="submit" class="btn btn-primary">
            Referral einreichen
          </button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
